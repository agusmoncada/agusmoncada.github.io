!function e(t,n){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(t.Mustache={},n(t.Mustache))}(this,function t(e){function t(e){return"function"==typeof e}function n(e){return g(e)?"array":typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function o(e,t){return v.call(e,t)}function s(e){return!o(w,e)}function a(e){return String(e).replace(/[&<>"'`=\/]/g,function t(e){return y[e]})}function u(t,n){function i(){if(f&&!d)for(;h.length;)delete u[h.pop()];else h=[];f=!1,d=!1}function o(e){if("string"==typeof e&&(e=e.split(k,2)),!g(e)||2!==e.length)throw new Error("Invalid tags: "+e);v=new RegExp(r(e[0])+"\\s*"),w=new RegExp("\\s*"+r(e[1])),y=new RegExp("\\s*"+r("}"+e[1]))}if(!t)return[];var a=[],u=[],h=[],f=!1,d=!1,v,w,y;o(n||e.tags);for(var U=new l(t),T,j,S,V,C,A;!U.eos();){if(T=U.pos,S=U.scanUntil(v))for(var I=0,R=S.length;R>I;++I)V=S.charAt(I),s(V)?h.push(u.length):d=!0,u.push(["text",V,T,T+1]),T+=1,"\n"===V&&i();if(!U.scan(v))break;if(f=!0,j=U.scan(E)||"name",U.scan(x),"="===j?(S=U.scanUntil(b),U.scan(b),U.scanUntil(w)):"{"===j?(S=U.scanUntil(y),U.scan(m),U.scanUntil(w),j="&"):S=U.scanUntil(w),!U.scan(w))throw new Error("Unclosed tag at "+U.pos);if(C=[j,S,T,U.pos],u.push(C),"#"===j||"^"===j)a.push(C);else if("/"===j){if(A=a.pop(),!A)throw new Error('Unopened section "'+S+'" at '+T);if(A[1]!==S)throw new Error('Unclosed section "'+A[1]+'" at '+T)}else"name"===j||"{"===j||"&"===j?d=!0:"="===j&&o(S)}if(A=a.pop())throw new Error('Unclosed section "'+A[1]+'" at '+U.pos);return p(c(u))}function c(e){for(var t=[],n,r,i=0,o=e.length;o>i;++i)n=e[i],n&&("text"===n[0]&&r&&"text"===r[0]?(r[1]+=n[1],r[3]=n[3]):(t.push(n),r=n));return t}function p(e){for(var t=[],n=t,r=[],i,o,s=0,a=e.length;a>s;++s)switch(i=e[s],i[0]){case"#":case"^":n.push(i),r.push(i),n=i[4]=[];break;case"/":o=r.pop(),o[5]=i[2],n=r.length>0?r[r.length-1][4]:t;break;default:n.push(i)}return t}function l(e){this.string=e,this.tail=e,this.pos=0}function h(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function f(){this.cache={}}var d=Object.prototype.toString,g=Array.isArray||function T(e){return"[object Array]"===d.call(e)},v=RegExp.prototype.test,w=/\S/,y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},x=/\s*/,k=/\s+/,b=/\s*=/,m=/\s*\}/,E=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function j(){return""===this.tail},l.prototype.scan=function S(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},l.prototype.scanUntil=function V(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n},h.prototype.push=function C(e){return new h(e,this)},h.prototype.lookup=function A(e){var n=this.cache,r;if(n.hasOwnProperty(e))r=n[e];else{for(var o=this,s,a,u=!1;o;){if(e.indexOf(".")>0)for(r=o.view,s=e.split("."),a=0;null!=r&&a<s.length;)a===s.length-1&&(u=i(r,s[a])),r=r[s[a++]];else r=o.view[e],u=i(o.view,e);if(u)break;o=o.parent}n[e]=r}return t(r)&&(r=r.call(this.view)),r},f.prototype.clearCache=function I(){this.cache={}},f.prototype.parse=function R(e,t){var n=this.cache,r=n[e];return null==r&&(r=n[e]=u(e,t)),r},f.prototype.render=function O(e,t,n){var r=this.parse(e),i=t instanceof h?t:new h(t);return this.renderTokens(r,i,n,e)},f.prototype.renderTokens=function P(e,t,n,r){for(var i="",o,s,a,u=0,c=e.length;c>u;++u)a=void 0,o=e[u],s=o[0],"#"===s?a=this.renderSection(o,t,n,r):"^"===s?a=this.renderInverted(o,t,n,r):">"===s?a=this.renderPartial(o,t,n,r):"&"===s?a=this.unescapedValue(o,t):"name"===s?a=this.escapedValue(o,t):"text"===s&&(a=this.rawValue(o)),void 0!==a&&(i+=a);return i},f.prototype.renderSection=function M(e,n,r,i){function o(e){return s.render(e,n,r)}var s=this,a="",u=n.lookup(e[1]);if(u){if(g(u))for(var c=0,p=u.length;p>c;++c)a+=this.renderTokens(e[4],n.push(u[c]),r,i);else if("object"==typeof u||"string"==typeof u||"number"==typeof u)a+=this.renderTokens(e[4],n.push(u),r,i);else if(t(u)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,i.slice(e[3],e[5]),o),null!=u&&(a+=u)}else a+=this.renderTokens(e[4],n,r,i);return a}},f.prototype.renderInverted=function q(e,t,n,r){var i=t.lookup(e[1]);return!i||g(i)&&0===i.length?this.renderTokens(e[4],t,n,r):void 0},f.prototype.renderPartial=function D(e,n,r){if(r){var i=t(r)?r(e[1]):r[e[1]];return null!=i?this.renderTokens(this.parse(i),n,r,i):void 0}},f.prototype.unescapedValue=function F(e,t){var n=t.lookup(e[1]);return null!=n?n:void 0},f.prototype.escapedValue=function N(t,n){var r=n.lookup(t[1]);return null!=r?e.escape(r):void 0},f.prototype.rawValue=function W(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var U=new f;e.clearCache=function _(){return U.clearCache()},e.parse=function z(e,t){return U.parse(e,t)},e.render=function B(e,t,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+n(e)+'" was given as the first argument for mustache#render(template, view, partials)');return U.render(e,t,r)},e.to_html=function G(n,r,i,o){var s=e.render(n,r,i);return t(o)?void o(s):s},e.escape=a,e.Scanner=l,e.Context=h,e.Writer=f});